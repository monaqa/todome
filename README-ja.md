# ☑️ todome

(English version is [here](./README.md))

todome はタスクをテキスト形式で書き留め、管理するために考案された記法です。
[Todo.txt](http://todotxt.org) の影響を受けており、実際 todome 記法の一部は Todo.txt のものと似通っています。

## todome 周辺ツール

todome には、タスク管理を支援するためのツールが複数用意されています。
これらを使用することで、単にテキストを編集するよりも効果的・効率的なタスク管理を実現することができます。

* [tree-sitter-todome](https://github.com/monaqa/tree-sitter-todome): [Tree-sitter](https://tree-sitter.github.io/tree-sitter/) を用いて記述された todome のパーサ。
* todome CLI（本リポジトリ）: todome 記法のフォーマットなどを行う CLI ツール。
* todome-language-server（本リポジトリ）: todome を用いたタスク管理を支援する言語サーバ。以下の機能を提供:
  * カテゴリ名やタグ名の補完
  * 期限日当日のタスクや期限切れのタスクの強調表示

## todome 記法

todome 記法のタスクは `.todome` という拡張子を持つファイルに記述します。

todome 記法を1枚の図にまとめると以下のようになります。

![todome-notation.png](https://user-images.githubusercontent.com/48883418/140614506-03fd700d-2791-44a2-baa5-0b1f9590c597.png)

### 基本的なタスク

todome では1つの行に1つのタスクを書くのが基本です。todo.txt と同様、基本的にはテキストを連ねるだけでそれ自身がタスクとなります。

```
図書館で本を返す
牛乳を買う
XXX と電話で打ち合わせ
- XXX のメールに返信
```

### 状態（未完了、着手済、完了済、キャンセル）

先頭に `-` や `*` といった記号を付与することで、タスクの状態を示すことができます。

```
図書館で本を返す         # デフォルトは未完了
- 牛乳を買う             # 完了
= XXX と電話で打ち合わせ # キャンセル
XXX のメールに返信
```

状態を表す記号は以下の4種類があります。

|記号|状態      |備考    |
|----|----------|--------|
|`+` |未完了    |省略可能|
|`*` |着手済    |        |
|`-` |完了      |        |
|`=` |キャンセル|        |

### メタ情報（優先度、期日、カテゴリ）

各タスクには優先度や期日、カテゴリといったメタ情報を記述することができます。
メタ情報は状態とタスク本文の間に記述します。

```
(B) (2021-11-13) 図書館で本を返す
- [買い物] 牛乳を買う
[work] XXX と電話で打ち合わせ
- [work] XXX のメールに返信
```

* 優先度: `(A)`, `(B)`, `(C)`, ..., `(Z)`
  * 丸括弧 + 大文字アルファベット1文字で優先度を表す。
  * `(A)` が優先度最高、 `(Z)` が最低。
* 期日: `(2021-11-06)`, etc.
  * 丸括弧 + `YYYY-mm-dd` 形式の日付で期日を表す。
* カテゴリ: `[work]`, `[買い物]`, `[xxx のメールの件]`, etc.
  * 空でないテキストを角括弧で囲むことでカテゴリを表す。
  * カテゴリ名（角括弧の中身）にはほとんどの文字を含めることができるが、`[` `]` `#` 及び改行などの文字を含めてはならない。

### サブタスク

todome ではインデントを用いてタスクの階層構造を明示することができます。
インデントには必ず**タブ文字**を用いる必要があります。
（スペースでインデントを行ったとしても単に無視されます。）

```
# タブ文字を用いることに注意
買い物
	牛乳
	卵6つ
```

サブタスク自身に状態やメタ情報を付加することもできます。

```
買い物
	- (A) 牛乳  # 優先度Aの完了サブタスク
	(C) 卵6つ   # 優先度Cの未完了サブタスク
```

サブタスクは親のタスクを引き継ぐため、
以下のように書くと、「買い物」「牛乳」「卵6つ」が全て完了扱いとなります。
状態は上書きすることもできます。

```
- 買い物
	(A) 牛乳    # 優先度Aの完了サブタスク
	(C) 卵6つ   # 優先度Cの完了サブタスク
```

サブタスクはネストさせることも可能です。

```
買い物
	- 食料品
		牛乳
		(C) 卵6つ
	日用品
		食器用洗剤
```

純粋にサブタスクの記述として用いるだけではなく、
親タスクの詳細情報や途中経過のメモとしてサブタスクを用いるのも有効です。
文法に逆らわない範囲であれば、 どのような記述の仕方であっても問題ありません。

```
xxxx についての論文サーベイ
	対象論文：xxxxxx
	URL: https://...
	どこまで読んだか
		- イントロダクション
		- 従来手法
		* 提案手法
		実験
```

### ヘッダ

複数のタスクを同一のカテゴリに含めたい場合には、ヘッダを用いてタスクを整理して表示するのが便利です。
状態・優先度・期日・カテゴリの1つ以上の属性を書き、タブ文字でインデントされたタスクを次行以降に記述することで、先程書いた属性をインデントされたすべてのタスクに反映させることができます。

```
(2021-11-13)
	(B) 図書館で本を返す

[買い物]
	- 牛乳
	卵6つ

(A) [work]
	XXX と電話で打ち合わせ
	- XXX のメールに返信
```

これは以下のように書いているのと同じこととなります。

```
(B) (2021-11-13) 図書館で本を返す

- [買い物] 牛乳
[買い物] 卵6つ

(A) [work] XXX と電話で打ち合わせ
- (A) [work] XXX のメールに返信
```

サブタスクとヘッダはよく似た機能ですが、ヘッダ自体は一つのタスクとして扱われないこと、
ヘッダの子要素は一つ一つが独立したタスクとして扱われることに注意が必要です。

### タグ

タスクのテキスト中にはタグを含ませることができます。本文中の `@` から始まる英数字の連なり（正規表現で表すと `@[a-zA-Z0-9][a-zA-Z0-9_-]*`）がタグとみなされます。

```
XXX の @mail に返信
```

### コメント

`#` で始まる箇所から行末まではコメントとして扱われます。コメントだけで構成される行をつくることもできます。コメントはタスクやタスク本文としては扱われません。

```
# この行はタスクではなくコメント
```
